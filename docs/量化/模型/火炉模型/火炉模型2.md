# 金融热力学量化交易系统架构 (FT-Quant System)
**版本号**：v4.0 (Final Architecture)
**架构师**：ICPC Logic Engine
**更新日期**：2023-10-XX

---

## 1. 核心哲学 (Core Philosophy)
本模型摒弃传统技术指标的“形状预测”，基于**能量守恒与热力学传导**原理。
* **核心公理**：价格位移（涨跌）是能量（资金）在特定介质（筹码）中传导的结果。
* **交易本质**：捕捉“炉温（因）”与“铁块温（果）”的**势能差**，并在“木炭（燃料）”充足的前提下进行套利。

---

## 2. 物理参数定义 (Parameters)

| 参数符号 | 物理名称 | 市场映射数据 | 逻辑定义 | 计算/观察维度 |
| :--- | :--- | :--- | :--- | :--- |
| **$T_f$** | **炉温 (Furnace)** | **实时股价** | **【主动力】** 资金攻击的最前线，系统的“因”。 | Tick级或分钟级收盘价 |
| **$T_i$** | **铁块温 (Iron)** | **动态均价** | **【惯性/重心】** 市场成本共识，系统的“果”。 | VWAP (成交量加权均价) 或 均线系统 |
| **$C\_\{coal\}$** | **木炭 (Fuel)** | **筹码分布** | **【势能/续航】** 特定价格区的成交密集度。 | Volume Profile / 历史堆量 / 换手率 |
| **$k$** | **导热系数 (Conductivity)** | **量价效率** | **【阻力/介质】** 单位成交量带来的价格位移。 | $\Delta Price / \Delta Volume$ |

---

## 3. 状态判定机 (State Machine)

系统将全市场 5000+ 标的划分为四种物理状态，仅对 **B** 和 **C** 状态进行操作。

### A. 蓄能期 (Accumulation) - `状态：观察`
* **特征**：$T_f \approx T_i$ (无温差)，$C\_\{coal\}$ 在低位持续堆积。
* **导热系数**：$k$ 被人为压低（压盘吸筹，有量无价）。
* **策略**：加入自选池，等待点火。

### B. 引燃期 (Ignition) - `状态：突击 (卫星仓位)`
* **特征**：
    1.  **温差突变**：$T_f$ 瞬间拉升，脱离 $T_i$ 控制 (Gap > Threshold)。
    2.  **热阻归零**：$k$ 值暴增，极少量买盘引发大涨。
* **策略**：**趋势爆发捕捉**。
* **筛选**：仅操作回测中“点火成功率”最高的前 5% 标的。

### C. 稳燃期 (Steady Combustion) - `状态：核心 (主力仓位)`
* **特征**：
    1.  **惯性形成**：$T_i$ 方向向上，$T_f$ 始终在 $T_i$ 上方运行。
    2.  **阶梯加炭**：上涨途中不断出现新的成交密集区（新资金接力）。
* **策略**：**低风险滚雪球**。
* **买点**：当 $T_f$ 回踩 $T_i$ 且成交量萎缩时（能量补给点）。

### D. 灰烬期 (Burnout) - `状态：黑名单`
* **特征**：$T_f$ 跌破 $T_i$，且高位换手率过大（木炭耗尽）或无承接（虚火）。
* **策略**：清仓 / 物理止损。

---

## 4. 算法执行流程 (Algorithm SOP)

### 步骤一：全场扫描 (The Scan)
* **输入**：全市场 5000 只股票。
* **初筛**：`if Current_Volume_Profile < Threshold: continue` (剔除无煤炉子)。
* **分类**：计算每只股票当前的 $\{T_f, T_i, C, k\}$ 并打上状态标签。

### 步骤二：参数适配 (The Fit)
* **逻辑**：调用该股票过去 N 个月的历史数据，加载其专属参数包。
    * *Config_Stock_A*: 引燃阈值=2.1%, 回踩容忍度=1.5%
    * *Config_Stock_B*: 引燃阈值=3.5%, 回踩容忍度=2.0%

### 步骤三：信号触发 (The Trigger)
* **稳燃组 (70% 资金)**：
    * `Signal = (T_f <= T_i * (1 + Buffer)) AND (Vol < Avg_Vol)`
    * **动作**：限价单买入 (均价附近)。
* **引燃组 (30% 资金)**：
    * `Signal = (T_f > T_i * (1 + Ignition_Threshold)) AND (k > k_avg * 3)`
    * **动作**：追单买入 (确认起爆)。

### 步骤四：风控与自适应 (Feedback)
* **硬止损**：`if T_f < T_i AND Duration > Time_Limit: SELL_ALL`
* **每日回归**：收盘后计算今日信号的准确率，修正明日的 `Ignition_Threshold` 和 `Buffer` 参数。

---

## 5. 资金管理 (Money Management)

* **总资金**：100% (假设 10 万起步)
* **分仓策略**：
    * 单只个股上限：**10% (1万)**。
    * 持仓数量：10 只左右。
* **动态配比**：
    * **稳燃期标的**：占总仓位 70%-80% (追求每天 0.5% 复利)。
    * **引燃期标的**：占总仓位 20%-30% (追求妖股暴击)。

---

## 6. 实盘实验记录表 (Experiment Log)

*建议使用 Excel 或数据库记录以下字段，用于算法调优：*

| 日期 | 代码 | 状态 (引燃/稳燃) | 初始木炭厚度 (0-10) | 引燃温差 (%) | 导热系数变化 | 结果 (盈/亏) | 备注 (模型偏差分析) |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 2024-01-01 | 600XXX | 引燃 | 8.5 (极厚) | 2.3% | 暴增 5 倍 | +12% | 导热极好，参数完美 |
| 2024-01-01 | 002XXX | 稳燃 | 6.0 (中等) | 0.5% | 稳定 | -1.5% | 均价支撑失效，需调大安全垫 |
| ... | ... | ... | ... | ... | ... | ... | ... |

---

## 7. 伪代码逻辑 (Pseudo-Code)

```python
class StockModel:
    def __init__(self, history_data):
        # 1. 初始化参数寻优
        self.params = self.optimize_parameters(history_data) 
    
    def daily_scan(self, realtime_data):
        T_f = realtime_data.price
        T_i = self.calculate_vwap(realtime_data)
        C_coal = self.calculate_volume_profile(realtime_data)
        
        # 2. 状态判定
        if T_f < T_i and C_coal < LOW_THRESHOLD:
            return "ASH" (灰烬)
            
        elif T_f > T_i * (1 + self.params.ignition_gap):
             if C_coal > HIGH_THRESHOLD:
                 return "IGNITION" (引燃 - 买入)
                 
        elif T_f > T_i and is_trending_up(T_i):
             if abs(T_f - T_i) < self.params.steady_buffer:
                 return "STEADY" (稳燃 - 回踩买入)
        
        return "ACCUMULATION" (蓄能 - 观望)

    def feedback_loop(self, today_result):
        # 3. 闭环更新
        self.params = self.update_weights(self.params, today_result)